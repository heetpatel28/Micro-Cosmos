# {{SERVICE_NAME}}

Notification microservice - Generated by Microservice Generator

## Overview

This is a ready-to-run notification microservice built with Node.js {{NODE_VERSION}}, Express, and BullMQ for async job processing. It provides email and SMS notification capabilities with queue-based processing.

## Features

- Async notification processing with BullMQ
- Email and SMS support (placeholder implementation)
- Redis-based job queue
- Health check endpoint
- Docker support
- TypeScript for type safety

## Quick Start

### Prerequisites

- Node.js {{NODE_VERSION}} or higher
- Redis (for job queue)
- npm or yarn

### Installation

```bash
npm install
```

### Configuration

Copy `.env.example` to `.env` and configure:

```env
PORT={{PORT}}
NODE_ENV={{ENV}}
REDIS_HOST=localhost
REDIS_PORT=6379
```

### Development

```bash
# Start Redis (if not running)
# Docker: docker run -d -p 6379:6379 redis:alpine

npm run dev
```

### Production

```bash
npm run build
npm start
```

## API Endpoints

### Health Check

```
GET /health
```

### Notifications API

```
POST /api/notifications          - Queue a notification
GET  /api/notifications/status/:jobId - Get job status
```

### Example Request

```bash
# Send email notification
curl -X POST http://localhost:{{PORT}}/api/notifications \
  -H "Content-Type: application/json" \
  -d '{
    "type": "email",
    "to": "user@example.com",
    "subject": "Welcome!",
    "message": "Welcome to our service!"
  }'

# Send SMS notification
curl -X POST http://localhost:{{PORT}}/api/notifications \
  -H "Content-Type: application/json" \
  -d '{
    "type": "sms",
    "to": "+1234567890",
    "message": "Your verification code is 123456"
  }'
```

## Docker

Build and run with Docker:

```bash
docker build -t {{SERVICE_NAME}} .
docker run -p {{PORT}}:{{PORT}} \
  -e REDIS_HOST=redis \
  -e REDIS_PORT=6379 \
  {{SERVICE_NAME}}
```

## Integration

This template includes placeholder notification logic. To use in production:

1. **Email:** Integrate with SendGrid, AWS SES, Mailgun, etc.
2. **SMS:** Integrate with Twilio, AWS SNS, etc.

Example integration in `src/services/notificationQueue.ts`:

```typescript
async processNotification(job: { data: NotificationJob }) {
  const { type, to, subject, message } = job.data;
  
  if (type === 'email') {
    // Use SendGrid, AWS SES, etc.
    await emailService.send({ to, subject, message });
  } else if (type === 'sms') {
    // Use Twilio, AWS SNS, etc.
    await smsService.send({ to, message });
  }
}
```

## Environment Variables

| Variable | Description | Default |
|----------|-------------|---------|
| PORT | Server port | {{PORT}} |
| NODE_ENV | Environment | {{ENV}} |
| REDIS_HOST | Redis host | localhost |
| REDIS_PORT | Redis port | 6379 |

## Project Structure

```
src/
├── services/
│   └── notificationQueue.ts   # Queue and worker logic
├── routes/
│   ├── notifications.ts       # Notification API routes
│   └── health.ts              # Health check route
└── index.ts                   # Application entry point
```

## Notes

- This is a template-based generated service
- Redis is required for job queue
- Notification logic is placeholder - integrate with real services
- Jobs are processed asynchronously
- Failed jobs are automatically retried (3 attempts)

---

Generated for domain: {{DOMAIN}}
Stack: {{STACK}} {{VERSION}}

